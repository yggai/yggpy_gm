# 构建与混淆（PyArmor 方案）

本项目支持在打包时使用 PyArmor 对源码进行混淆。默认不混淆；设置环境变量 `YGG_OBFUSCATE=1` 时启用混淆。

## 前置安装

```
pip install pyarmor
```

## 构建（不混淆）

```
python setup.py sdist bdist_wheel
```

## 构建（混淆）

```
set YGG_OBFUSCATE=1  # Windows PowerShell: $env:YGG_OBFUSCATE=1
python setup.py bdist_wheel
```

说明：
- 启用混淆时，会将 `yggpy_gm` 包混淆到 `build/obf/`，并自动把 `pytransform` 运行时一起打进 wheel。
- 建议只发布 wheel（bdist_wheel），避免发布 sdist（源代码包）。

## 运行

混淆后的 wheel 与普通 wheel 使用方式一致：

```
pip install dist/yggpy_gm-*.whl
```

## 进阶：License/到期/绑定

PyArmor 支持 License（到期、设备绑定等），可在 obfuscate 阶段增加参数，例如：

```
pyarmor licenses --expired 2026-01-01 customer
pyarmor obfuscate -r -O build/obf --with-license licenses/customer/license.lic yggpy_gm
```

如需将这些选项集成到 setup.py，我可以按你的策略（到期日期、绑定策略）进一步改造。
